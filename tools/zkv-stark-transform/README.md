# zkv-stark-transform

A command-line tool for transforming STARK proofs from various formats (Cairo, Starknet, etc.) into the format expected by the zkVerify blockchain's STARK verifier pallet.

## Features

- **Cairo Proof Conversion**: Convert STARK proofs generated by Cairo programs to zkVerify format
- **Format Validation**: Validate zkVerify STARK proof format compliance
- **Test Data Generation**: Generate test proofs for development and testing
- **Cross-Platform**: Works on Windows, macOS, and Linux

## Installation

```bash
cd tools/zkv-stark-transform
cargo build --release
```

## Usage

### Convert Cairo Proof

```bash
zkv-stark-transform convert-cairo \
    --input cairo_proof.json \
    --output zkv_proof.json \
    --vk verification_key.json
```

### Validate Proof Format

```bash
zkv-stark-transform validate \
    --proof zkv_proof.json \
    --vk verification_key.json
```

### Generate Test Data

```bash
zkv-stark-transform generate-test-data \
    --output test_data/ \
    --count 5
```

## Input/Output Formats

### Cairo Proof Format (Input)

```json
{
  "proof": {
    "fri_proof": {
      "fri_lde_commitment": "0x...",
      "fri_query_proofs": [...]
    },
    "trace_lde_commitment": "0x...",
    "constraint_polynomials_lde_commitment": "0x...",
    "public_input_polynomials_lde_commitment": "0x...",
    "composition_polynomial_lde_commitment": "0x..."
  },
  "public_inputs": ["0x...", "0x..."]
}
```

### zkVerify Proof Format (Output)

```json
{
  "fri_proof": {
    "fri_lde_commitment": "0x...",
    "fri_lde_commitment_merkle_tree_root": "0x...",
    "fri_lde_commitment_merkle_tree_path": ["0x..."],
    "fri_lde_commitment_merkle_tree_leaf_index": 0,
    "fri_query_proofs": [...]
  },
  "trace_lde_commitment": "0x...",
  "constraint_polynomials_lde_commitment": "0x...",
  "public_input_polynomials_lde_commitment": "0x...",
  "composition_polynomial_lde_commitment": "0x...",
  "trace_lde_commitment_merkle_tree_root": "0x...",
  "constraint_polynomials_lde_commitment_merkle_tree_root": "0x...",
  "public_input_polynomials_lde_commitment_merkle_tree_root": "0x...",
  "composition_polynomial_lde_commitment_merkle_tree_root": "0x...",
  "trace_lde_commitment_merkle_tree_path": ["0x..."],
  "constraint_polynomials_lde_commitment_merkle_tree_path": ["0x..."],
  "public_input_polynomials_lde_commitment_merkle_tree_path": ["0x..."],
  "composition_polynomial_lde_commitment_merkle_tree_path": ["0x..."],
  "trace_lde_commitment_merkle_tree_leaf_index": 0,
  "constraint_polynomials_lde_commitment_merkle_tree_leaf_index": 0,
  "public_input_polynomials_lde_commitment_merkle_tree_leaf_index": 0,
  "composition_polynomial_lde_commitment_merkle_tree_leaf_index": 0
}
```

## Development

### Building

```bash
cargo build
```

### Testing

```bash
cargo test
```

### Running Examples

```bash
# Generate test data
cargo run -- generate-test-data --output examples/ --count 3

# Validate generated data
cargo run -- validate --proof examples/proof_0.json --vk examples/vk_0.json
```

## Integration with zkVerify

This tool is designed to work seamlessly with the zkVerify blockchain:

1. **Generate Proof**: Use Cairo or other STARK proving systems
2. **Transform**: Use this tool to convert to zkVerify format
3. **Submit**: Submit the transformed proof to the zkVerify blockchain
4. **Verify**: The blockchain will verify the proof using the STARK verifier pallet

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests
5. Submit a pull request

## License

Apache-2.0
